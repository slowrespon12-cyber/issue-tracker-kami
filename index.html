<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Issue & Solusi</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f6f7f9;
  margin: 0;
  padding: 0;
}

.container {
  max-width: 900px;
  margin: 40px auto;
  background: #fff;
  padding: 30px;
  border-radius: 8px;
}

input {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  border: 1px solid #ddd;
  border-radius: 6px;
  margin-bottom: 20px;
}

.issue-title {
  font-size: 22px;
  font-weight: bold;
  margin-bottom: 10px;
}

.section {
  margin-top: 20px;
}

.section h4 {
  margin-bottom: 6px;
}

img {
  max-width: 100%;
  border-radius: 6px;
  margin-top: 10px;
}

.not-found {
  color: #999;
  margin-top: 20px;
}
</style>
</head>

<body>
<div class="container">

  <input id="search" placeholder="Cari issue..." />

  <div id="result"></div>

</div>

<script>
const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQTWo0gRTTnJbNfx20pAkIQI7z6o4jW-TPjgv2mNYJjunjy1ndViQtOhkEuLk2h7Lw15BtdK5lJmsHl/pub?gid=0&single=true&output=csv";
let issues = [];

fetch(SHEET_URL)
  .then(res => res.text())
  .then(csv => {
    const rows = csv.split("\n").slice(1);
    rows.forEach(r => {
      const [issue, solusi, langkah, image_id] = r.split(",");
      issues.push({ issue, solusi, langkah, image_id });
    });
  });

document.getElementById("search").addEventListener("input", function () {
  const keyword = this.value.toLowerCase();
  const result = document.getElementById("result");
  result.innerHTML = "";

  if (!keyword) return;

  const found = issues.find(i =>
    i.issue.toLowerCase().includes(keyword)
  );

  if (!found) {
    result.innerHTML = `<div class="not-found">Issue tidak ditemukan</div>`;
    return;
  }

  const imgHTML = found.image_id
    ? `<img src="https://drive.google.com/uc?id=${found.image_id}">`
    : "";

  result.innerHTML = `
    <div class="issue-title">${found.issue}</div>

    <div class="section">
      <h4>Solusi</h4>
      <p>${found.solusi}</p>
    </div>

    <div class="section">
      <h4>Langkah-langkah</h4>
      <p>${found.langkah}</p>
    </div>

    ${imgHTML}
  `;
});
</script>

</body>
</html>
